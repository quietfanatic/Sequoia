<!DOCTYPE html>
<html><head>

<title>Sequoia Shell</title>
<style>
#toolbar { display:flex; align-items:center; position:absolute; left:0; top:0; right:0; height:32px; border-bottom:2px solid; }
button { border:none; background:none; }
#address { flex-grow:1; height:28px; padding-left:0.4rem; padding-right:0.4rem; border:none; }
#tree { position:absolute; right:0; top:34px; width:120px; bottom:0; border-left:2px solid; }
</style>

</head><body>

<nav id="toolbar">
<button id="back">&lt;</button>
<button id="forward">&gt;</button>
<input id="address" />
<button id="menu">...</button>
</nav>

<nav id="tree">

</nav>

<div id="content"></div>

<script>

let host = window.chrome.webview;

let back = document.getElementById("back");
back.addEventListener("press", e=>{
    host.postMessage({"back":null});
});

let address = document.getElementById("address");
address.addEventListener("keydown", e=>{
    if (e.key == "Enter") {
        host.postMessage({navigate:address.value});
    }
});

host.addEventListener("message", e=>{
    if ("document_state_changed" in e.data) {
        arg = e.data.document_state_changed;
        address.value = arg.url;
        back.enabled = arg.back;
        forward.enabled = arg.forward;
    }
    else {
        console.log("Shell received Unknown message received");
    }
});

host.postMessage({ready:null});
</script>

</body></html>
